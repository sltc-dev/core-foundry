---
name: ai-generated-code-docs
description: 在 AI 编写代码后自动生成全面的文档。在完成代码实现后（在 EXECUTION 模式期间或之后）立即使用此 skill，创建详细文档解释功能、架构、关键组件、技术难点、使用示例和维护指南。支持中文、英文和日语文档。在刚完成编写功能、模块或组件的代码文件时触发此 skill。
---

# AI 代码文档自动生成

在 AI 编写代码后自动生成全面、可维护的文档。

## 何时使用此 Skill

在以下场景**编写完代码后立即**调用此 skill：

1. **新功能实现** - 为新功能或模块创建文件后
2. **复杂算法实现** - 实现非平凡逻辑时
3. **集成代码** - 编写 API 集成或系统连接后
4. **重构完成** - 代码结构发生重大变更时
5. **组件创建** - 构建新组件、类或服务后

**时机**：代码编写完成后立即生成文档，趁上下文还在记忆中。

## 文档生成工作流程

### 步骤 1: 分析刚刚编写的代码

回顾你实现了什么：
- 创建或修改了哪些文件？
- 哪些组件、类或函数是核心？
- 你解决了哪些技术挑战？
- 你做了哪些设计决策？

### 步骤 2: 选择文档语言

根据项目上下文选择：
- **中文**：中文团队
- **English**：国际或开源项目
- **日本語**：日语团队

**关键规则**：代码注释只能使用英文或日语，绝不能使用中文。

### 步骤 3: 使用模板创建文档

使用 `assets/IMPLEMENTATION_DOC_TEMPLATE.md` 中的模板作为结构。

**必需章节**（全部包含）：

1. **功能概述 (Functionality Overview)**
   - 实现的核心功能
   - 使用场景
   - 设计目标

2. **技术架构 (Technical Architecture)**
   - 整体结构（有帮助时使用 mermaid 图）
   - 技术栈
   - 数据流

3. **关键组件说明 (Key Components)**
   - 对每个主要组件/模块/类：
     - 链接到文件及行号：`[组件名](file:///path/to/file#L123-L456)`
     - 解释功能
     - 记录关键方法/函数
     - 提供使用示例

4. **技术难点分析 (Technical Challenges)**
   - 识别复杂或非显而易见的部分
   - 解释问题、解决方案和理由
   - 链接到相关代码段
   - 证明设计决策的合理性

5. **使用示例 (Usage Examples)**
   - 基础用法及代码示例
   - 高级场景
   - 常见用例

6. **维护注意事项 (Maintenance Guidelines)**
   - 遵循的代码标准
   - 如何安全扩展
   - 已知限制
   - 性能考虑
   - 调试技巧

**可选章节**（相关时包含）：
- 测试说明
- 依赖关系
- 更新日志
- 参考资料

### 步骤 4: 用实际内容填充模板

**关键指南**：

✅ **应该做**：
- 解释 WHY（为什么），而不仅仅是 WHAT（是什么）（代码已展示是什么）
- 链接到具体的代码位置及行号
- 使用具体示例
- 记录非显而易见的行为
- 解释设计权衡
- 为架构使用 mermaid 图
- 保持解释简洁但完整
- 始终使用所选语言

❌ **不应该做**：
- 记录显而易见的代码
- 留下未填充的模板占位符
- 复制代码而不加解释
- 写模糊的描述
- 忘记更新到实际文件的链接
- 在同一文档中混合语言

### 步骤 5: 保存文档

**命名约定**：
- `IMPLEMENTATION.md` - 英文文档
- `IMPLEMENTATION_ZH.md` - 中文文档
- `IMPLEMENTATION_JA.md` - 日文文档
- 或使用项目特定名称，如 `{功能名}_IMPLEMENTATION.md`

**位置**：保存在主代码文件所在目录，或 `docs/` 子目录中。

## 编写有效文档

### 关注高价值内容

**优先记录**：
1. 复杂算法或逻辑
2. 系统集成点
3. 性能关键代码
4. 业务逻辑和规则
5. 错误处理策略
6. 非显而易见的设计决策

详细指南请参阅 `references/documentation_best_practices.md`，内容包括：
- 识别值得记录的复杂性
- 编写清晰的技术说明
- 特定语言的文档标准
- 优秀与糟糕文档的示例
- 多语言文档指南

### 文档质量检查清单

定稿前，验证：
- [ ] 所有必需章节完成（无 TODO 或占位符）
- [ ] 文件路径和行号正确
- [ ] 代码示例准确且经过测试
- [ ] 语言一致（同一文档中无混合语言）
- [ ] 代码注释仅使用英文或日语
- [ ] 技术难点用 WHY 解释
- [ ] Mermaid 图正确渲染（如果使用）
- [ ] 使用示例真实且有帮助

## 示例工作流程

```
你刚刚实现了一个支付处理模块，包含文件：
- payment_processor.py
- payment_validators.py  
- payment_models.py

1. 分析："我创建了一个支付系统，包含验证、处理和模型"

2. 选择语言："团队讲中文 → 使用中文文档"

3. 创建文档：打开模板，保存为 IMPLEMENTATION_ZH.md

4. 填充章节：
   - 功能概述：解释支付处理功能
   - 技术架构：图表显示 validator → processor → models 流程
   - 关键组件：记录每个文件的用途和关键函数
   - 技术难点：解释重试逻辑、幂等性处理
   - 使用示例：展示如何处理支付
   - 维护注意事项：说明线程安全要求

5. 保存在 payment/ 目录中，与代码文件一起
```

## 最佳实践

### 对于复杂项目
- 每个主要功能/模块创建一个实现文档
- 使用子目录：`docs/功能名/IMPLEMENTATION.md`
- 在相关文档文件之间建立链接

### 对于简单工具
- 单个综合文件就足够了
- 对于简单代码可以跳过"技术架构"
- 如果合适可以与 README.md 合并

### 维护文档
- 代码更改时更新文档
- 立即删除过时的章节
- 将临时解决方案标记为临时
- 在代码审查中审查文档

## 资源

### 模板
- `assets/IMPLEMENTATION_DOC_TEMPLATE.md` - 全面的双语模板

### 参考资料
- `references/documentation_best_practices.md` - 详细的编写指南和示例

## 常见陷阱及避免方法

1. **过早生成文档** - 在代码完成后编写文档，而不是在过程中
2. **留下占位符** - 填充所有章节或删除不相关的章节
3. **代码中使用错误语言** - 代码注释中绝不使用中文
4. **链接失效** - 始终使用实际文件路径和行号
5. **过度记录显而易见的代码** - 专注于复杂性和非显而易见的部分
6. **对挑战解释不足** - 技术难点需要详尽解释

---

**记住**：良好的文档使 AI 生成的代码能够被人类维护。这不是可选的——对于项目的长期成功至关重要。
